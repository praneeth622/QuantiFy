<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="600" viewBox="0 0 1200 600">
  <style>
    .box { fill:#ffffff; stroke:#2b2b2b; stroke-width:1.5px; rx:6; }
    .title { font: 700 14px 'Segoe UI', Roboto, Arial; fill:#111827; }
    .label { font: 12px 'Segoe UI', Roboto, Arial; fill:#374151; }
    .arrow { stroke:#6b7280; stroke-width:1.4px; marker-end:url(#arrowhead); }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6b7280" />
    </marker>
  </defs>

  <!-- External -->
  <rect x="40" y="40" width="200" height="50" class="box"/>
  <text x="140" y="70" text-anchor="middle" class="title">External Data</text>
  <text x="140" y="88" text-anchor="middle" class="label">Binance WebSocket</text>

  <!-- Backend cluster -->
  <rect x="300" y="20" width="560" height="260" fill="#f3f4f6" stroke="#e5e7eb" rx="8"/>
  <text x="580" y="40" text-anchor="middle" class="title">Backend (FastAPI)</text>

  <!-- ingestion -->
  <rect x="340" y="70" width="180" height="50" class="box"/>
  <text x="430" y="100" text-anchor="middle" class="label">WebSocket Manager / Ingestion</text>

  <!-- DB -->
  <rect x="640" y="70" width="200" height="50" class="box"/>
  <text x="740" y="100" text-anchor="middle" class="label">DB: SQLite / Postgres</text>

  <!-- resampler -->
  <rect x="340" y="150" width="220" height="50" class="box"/>
  <text x="450" y="180" text-anchor="middle" class="label">Resampler (1s,1m,5m)</text>

  <!-- analytics -->
  <rect x="580" y="150" width="220" height="50" class="box"/>
  <text x="690" y="180" text-anchor="middle" class="label">Analytics Engine</text>

  <!-- alerts -->
  <rect x="840" y="150" width="180" height="50" class="box"/>
  <text x="930" y="180" text-anchor="middle" class="label">Alert Manager</text>

  <!-- arrows -->
  <path d="M240 65 L340 95" class="arrow"/>
  <path d="M520 95 L640 95" class="arrow"/>
  <path d="M460 125 L460 150" class="arrow"/>
  <path d="M560 175 L580 175" class="arrow"/>
  <path d="M700 175 L840 175" class="arrow"/>
  <path d="M740 95 L740 150" class="arrow"/>

  <!-- WebSocket Server -->
  <rect x="300" y="300" width="200" height="50" class="box"/>
  <text x="400" y="330" text-anchor="middle" class="label">WebSocket Broadcaster</text>

  <!-- API -->
  <rect x="540" y="300" width="200" height="50" class="box"/>
  <text x="640" y="330" text-anchor="middle" class="label">REST API (/docs)</text>

  <path d="M740 175 L740 300" class="arrow"/>
  <path d="M540 150 L540 300" class="arrow"/>

  <!-- Frontend cluster -->
  <rect x="860" y="20" width="320" height="260" fill="#f8fafc" stroke="#e6eef6" rx="8"/>
  <text x="1020" y="40" text-anchor="middle" class="title">Frontend (Next.js + Redux)</text>

  <rect x="880" y="80" width="260" height="50" class="box"/>
  <text x="1010" y="110" text-anchor="middle" class="label">React Dashboard</text>

  <rect x="880" y="150" width="120" height="45" class="box"/>
  <text x="940" y="180" text-anchor="middle" class="label">WebSocket Client</text>

  <rect x="1040" y="150" width="120" height="45" class="box"/>
  <text x="1100" y="180" text-anchor="middle" class="label">Redux Store</text>

  <path d="M500 325 L880 325" class="arrow"/>
  <path d="M500 325 L1040 175" class="arrow"/>
  <path d="M860 175 L1000 175" class="arrow" />

  <!-- Live analytics note -->
  <text x="600" y="380" class="label">Live Analytics: client-side (500ms throttled) for tick-based metrics; resample updates on timeframe boundaries</text>

</svg>
